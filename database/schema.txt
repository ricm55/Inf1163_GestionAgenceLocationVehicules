
PRAGMA foreign_keys = ON;

CREATE TABLE Client(
    id INTEGER CONSTRAINT pk_client PRIMARY KEY AUTOINCREMENT,
    nom varchar(50),
    prenom varchar(50),
    numTelephone varchar(30),
    dateCreation DATE,
    courriel varchar(50),
    permisDeConduire_id INTEGER REFERENCES PermisConduire(id),
    dateDeNaissance Date,
    adresse varchar(50),
    assurancePersonnelle BIT
);

CREATE TABLE PermisConduire(
    id INTEGER CONSTRAINT pk_permisConduire PRIMARY KEY AUTOINCREMENT,
    dateExpiration DATE
);

CREATE TABLE ClassePermis(
    id INTEGER CONSTRAINT pk_ClassePermis PRIMARY KEY AUTOINCREMENT,
    type varchar(30)
);

CREATE TABLE PermisConduireClassePermis(
    permisConduire_id INTEGER CONSTRAINT fk_PermisConduireClassePermis_permisConduire REFERENCES PermisConduire(id),
    classePermis_id INTEGER CONSTRAINT fk_PermisConduireClassePermis_classePermis REFERENCES ClassePermis(id),
    CONSTRAINT pk_PermisConduireClassePermis PRIMARY KEY (permisConduire_id,classePermis_id)
);

CREATE TABLE Paiement(
    id INTEGER CONSTRAINT pk_paiement PRIMARY KEY AUTOINCREMENT,
    paiementDebut DOUBLE,
    paiementFinal DOUBLE
);

CREATE TABLE Tarif(
    id INTEGER CONSTRAINT pk_tarif PRIMARY KEY AUTOINCREMENT,
    type varchar(30),
    prix DOUBLE
);

CREATE TABLE Forfait(
    id INTEGER CONSTRAINT pk_paiement PRIMARY KEY AUTOINCREMENT,
    type varchar(30),
    prix DOUBLE
);

 CREATE TABLE Vehicule(
     id INTEGER CONSTRAINT pk_vehicule PRIMARY KEY AUTOINCREMENT,
     marque varchar(50),
     modele varchar(50),
     annee INTEGER,
     couleur varchar(20),
     kilometrage INTEGER,
     quantiteEssence INTEGER,
     disponible BIT,
     classePermis_id INTEGER CONSTRAINT fk_vehicule_classePermis REFERENCES ClassePermis(id)
 );

 CREATE TABLE Location(
     id INTEGER CONSTRAINT pk_location PRIMARY KEY AUTOINCREMENT,
     client_id INTEGER CONSTRAINT fk_location_client REFERENCES Client(id),
     vehicule_id INTEGER CONSTRAINT fk_location_vehicule REFERENCES Vehicule(id),
     dateDebut DATE,
     kiloDebut INTEGER,
     distanceParcourue INTEGER,
     dateFin DATE,
     forfait_id INTEGER CONSTRAINT fk_location_forfait REFERENCES Forfait(id),
     tarif_id INTEGER CONSTRAINT fk_location_tarif REFERENCES Tarif(id),
     pairement_id INTEGER CONSTRAINT fk_location_paiement REFERENCES Paiement(id)
 );